function domloaded(){let a,i,l,r=!1,s=!1,d=!1,o=5,c,y,e,t,n,f,u,p,g,m,h;v();let A=document.getElementById("bane"),B=A.getContext("2d");function I(e){if(clearTimeout(c),u=0,m=0,h=0,p=0,g=0,s=!1,r=!0,a=[],i=[],outsideArray=[],insideArray=[],l=[],f=e,1==f){y=document.getElementById("prosent").value,y<=0?y=10:50<=y&&(y=50);for(var t=0;t<=A.height/(2*o);t++){i=[];for(var n=0;n<=A.width/(2*o);n++)randNum=Math.floor(Math.random()*(100/y)+1),randNum<=1?i[n]=1:i[n]=0;a[t]=i}console.log("Populated"),console.log(a),document.getElementById("populateKnapp").textContent="Repopulate",document.getElementById("drawKnapp").textContent="Draw"}else if(2==f){for(t=0;t<=A.height/(2*o);t++){i=[];for(n=0;n<=A.width/(2*o);n++)i[n]=0;a[t]=i}document.getElementById("populateKnapp").textContent="Populate",document.getElementById("drawKnapp").textContent="Redraw",d=!0}E(),document.getElementById("pauseKnapp").style.display="none",document.getElementById("playBoxedKnapp").style.display="initial",document.getElementById("playInfinityKnapp").style.display="initial"}function E(){for(var e=0;e<a.length;e++)for(var t=0;t<a[e].length;t++)1==a[e][t]?B.fillStyle="#0000FF":B.fillStyle="#FFFF00",B.fillRect(2*t*o,2*e*o,o,o);document.getElementById("generationsSpan").textContent=u}function k(){for(var e=0;e<a.length;e++){insideArray=[];for(var t=0;t<a[e].length;t++)if(0==e){if(0==t){if(0==a[e][t])a[e][t+1]+a[e+1][t]+a[e+1][t+1]===3?insideArray[t]=1:insideArray[t]=0;else if(1==a[e][t])switch(a[e][t+1]+a[e+1][t]+a[e+1][t+1]){case 2:case 3:insideArray[t]=1;break;default:insideArray[t]=0}}else if(t==a[e].length-1){if(0==a[e][t])a[e][t-1]+a[e+1][t]+a[e+1][t-1]===3?insideArray[t]=1:insideArray[t]=0;else if(1==a[e][t])switch(a[e][t-1]+a[e+1][t]+a[e+1][t-1]){case 2:case 3:insideArray[t]=1;break;default:insideArray[t]=0}}else if(0==a[e][t])a[e][t-1]+a[e][t+1]+a[e+1][t-1]+a[e+1][t]+a[e+1][t+1]===3?insideArray[t]=1:insideArray[t]=0;else if(1==a[e][t])switch(a[e][t-1]+a[e][t+1]+a[e+1][t-1]+a[e+1][t]+a[e+1][t+1]){case 2:case 3:insideArray[t]=1;break;default:insideArray[t]=0}}else if(e==a.length-1){if(0==t){if(0==a[e][t])a[e][t+1]+a[e-1][t]+a[e-1][t+1]===3?insideArray[t]=1:insideArray[t]=0;else if(1==a[e][t])switch(a[e][t+1]+a[e-1][t]+a[e-1][t+1]){case 2:case 3:insideArray[t]=1;break;default:insideArray[t]=0}}else if(t==a[e].length-1){if(0==a[e][t])a[e][t-1]+a[e-1][t]+a[e-1][t-1]===3?insideArray[t]=1:insideArray[t]=0;else if(1==a[e][t])switch(a[e][t-1]+a[e-1][t]+a[e-1][t-1]){case 2:case 3:insideArray[t]=1;break;default:insideArray[t]=0}}else if(0==a[e][t])a[e][t-1]+a[e][t+1]+a[e-1][t-1]+a[e-1][t]+a[e-1][t+1]===3?insideArray[t]=1:insideArray[t]=0;else if(1==a[e][t])switch(a[e][t-1]+a[e][t+1]+a[e-1][t-1]+a[e-1][t]+a[e-1][t+1]){case 2:case 3:insideArray[t]=1;break;default:insideArray[t]=0}}else if(0==t){if(0==a[e][t])a[e-1][t]+a[e-1][t+1]+a[e][t+1]+a[e+1][t]+a[e+1][t+1]===3?insideArray[t]=1:insideArray[t]=0;else if(1==a[e][t])switch(a[e-1][t]+a[e-1][t+1]+a[e][t+1]+a[e+1][t]+a[e+1][t+1]){case 2:case 3:insideArray[t]=1;break;default:insideArray[t]=0}}else if(t==a[e].length-1){if(0==a[e][t])a[e-1][t]+a[e-1][t-1]+a[e][t-1]+a[e+1][t]+a[e+1][t-1]===3?insideArray[t]=1:insideArray[t]=0;else if(1==a[e][t])switch(a[e-1][t]+a[e-1][t-1]+a[e][t-1]+a[e+1][t]+a[e+1][t-1]){case 2:case 3:insideArray[t]=1;break;default:insideArray[t]=0}}else if(0==a[e][t])a[e-1][t-1]+a[e-1][t]+a[e-1][t+1]+(a[e][t-1]+a[e][t+1])+(a[e+1][t-1]+a[e+1][t]+a[e+1][t+1])===3?insideArray[t]=1:insideArray[t]=0;else if(1==a[e][t])switch(a[e-1][t-1]+a[e-1][t]+a[e-1][t+1]+(a[e][t-1]+a[e][t+1])+(a[e+1][t-1]+a[e+1][t]+a[e+1][t+1])){case 2:case 3:insideArray[t]=1;break;default:insideArray[t]=0}outsideArray[e]=insideArray}for(e=0;e<outsideArray.length;e++)for(t=0;t<outsideArray[e].length;t++)a[e][t]=outsideArray[e][t];E(),K()}function w(){l=[];for(var e=0;e<a.length;e++)for(var t=0;t<a[e].length;t++)if(0==a[e][t])a[N(e-1,a.length)][N(t-1,a[e].length)]+a[N(e-1,a.length)][t]+a[N(e-1,a.length)][N(t+1,a[e].length)]+(a[e][N(t-1,a[e].length)]+a[e][N(t+1,a[e].length)])+(a[N(e+1,a.length)][N(t-1,a[e].length)]+a[N(e+1,a.length)][t]+a[N(e+1,a.length)][N(t+1,a[e].length)])===3&&l.push([e,t]);else if(1==a[e][t])switch(a[N(e-1,a.length)][N(t-1,a[e].length)]+a[N(e-1,a.length)][t]+a[N(e-1,a.length)][N(t+1,a[e].length)]+(a[e][N(t-1,a[e].length)]+a[e][N(t+1,a[e].length)])+(a[N(e+1,a.length)][N(t-1,a[e].length)]+a[N(e+1,a.length)][t]+a[N(e+1,a.length)][N(t+1,a[e].length)])){case 2:case 3:break;default:l.push([e,t])}!function(){for(var e=0;e<l.length;e++)1==a[l[e][0]][l[e][1]]?(B.fillStyle="#FFFF00",B.fillRect(2*l[e][1]*o,2*l[e][0]*o,o,o),a[l[e][0]][l[e][1]]=0):0==a[l[e][0]][l[e][1]]&&(B.fillStyle="#0000FF",B.fillRect(2*l[e][1]*o,2*l[e][0]*o,o,o),a[l[e][0]][l[e][1]]=1);document.getElementById("generationsSpan").textContent=u}(),K()}function b(e){p=performance.now(),s=!0,r=!1,d=!1,n=e,K(),document.getElementById("playBoxedKnapp").style.display="none",document.getElementById("playInfinityKnapp").style.display="none",document.getElementById("pauseKnapp").style.display="initial",document.getElementById("pauseKnapp").textContent="Pause"}function K(){v(),100<=u&&(g=performance.now(),m+=g-p,h=m/u,console.log("Average time:"),console.log(h),F(),I(1),b(2)),!r&&s&&(1==n?(c=setTimeout(k,t),u++):2==n&&(c=setTimeout(w,t),u++))}function F(){r?r&&(r=!1,K(),document.getElementById("pauseKnapp").textContent="Pause"):(r=!0,document.getElementById("pauseKnapp").textContent="Play")}function v(){switch(e=document.getElementById("fart").value,e=parseInt(e),e){case 1:speedName="Slowester",t=5e3;break;case 2:speedName="Slowest",t=2500;break;case 3:speedName="Slower",t=1500;break;case 4:speedName="Slow",t=1e3;break;case 5:speedName="Normal",t=750;break;case 6:speedName="Fast",t=500;break;case 7:speedName="Faster",t=250;break;case 8:speedName="Fastest",t=100;break;case 9:speedName="Fastester",t=50;break;default:speedName="Normal",t=750}document.getElementById("outSpan").textContent=speedName}function N(e,t){return(e%t+t)%t}document.getElementById("populateKnapp").onclick=function(){I(1)},document.getElementById("drawKnapp").onclick=function(){I(2)},A.addEventListener("click",function(e){var t,n;t=A,n=e,d&&(e=t.getBoundingClientRect(),t=n.clientX-e.left,e=n.clientY-e.top,t=10*Math.floor(t/10),e=10*Math.floor(e/10),0==a[e/(2*o)][t/(2*o)]?a[e/(2*o)][t/(2*o)]=1:1==a[e/(2*o)][t/(2*o)]&&(a[e/(2*o)][t/(2*o)]=0),E())}),document.getElementById("playBoxedKnapp").onclick=function(){b(1)},document.getElementById("playInfinityKnapp").onclick=function(){b(2)},document.getElementById("pauseKnapp").onclick=function(){F()},document.getElementById("fart").onchange=function(){v()}}document.addEventListener("DOMContentLoaded",domloaded,!1);
